module.exports=[26691,e=>{"use strict";var t=e.i(47909),i=e.i(74017),r=e.i(96250),s=e.i(59756),n=e.i(61916),o=e.i(74677),a=e.i(69741),h=e.i(16795),l=e.i(87718),f=e.i(95169),u=e.i(47587),c=e.i(66012),d=e.i(70101),w=e.i(26937),p=e.i(10372),g=e.i(93695);e.i(52474);var U=e.i(220),y=e.i(89171),x=e.i(874),b=e.i(93129);let v=new TextEncoder;new TextDecoder;class E{type;data;constructor(e,t){this.type=e,this.data=t}}class A extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Object.create(A.prototype)),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:A.name})}}function m(e,t,i){let r=Math.floor(i/0x100000000);e.setUint32(t,r),e.setUint32(t+4,i)}let I={type:-1,encode:function(e){if(!(e instanceof Date))return null;{let t,i,r,s;return function({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=0x3ffffffff)if(0===t&&e<=0xffffffff){let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}else{let i=e/0x100000000,r=new Uint8Array(8),s=new DataView(r.buffer);return s.setUint32(0,t<<2|3&i),s.setUint32(4,0|e),r}{let i=new Uint8Array(12),r=new DataView(i.buffer);return r.setUint32(0,t),m(r,4,e),i}}((i=Math.floor((t=e.getTime())/1e3),s=Math.floor((r=(t-1e3*i)*1e6)/1e9),{sec:i+s,nsec:r-1e9*s}))}},decode:function(e){let t=function(e){let t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{let e=t.getUint32(0);return{sec:(3&e)*0x100000000+t.getUint32(4),nsec:e>>>2}}case 12:return{sec:0x100000000*t.getInt32(4)+t.getUint32(8),nsec:t.getUint32(0)};default:throw new A(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}};class R{static defaultCodec=new R;__brand;builtInEncoders=[];builtInDecoders=[];encoders=[];decoders=[];constructor(){this.register(I)}register({type:e,encode:t,decode:i}){if(e>=0)this.encoders[e]=t,this.decoders[e]=i;else{let r=-1-e;this.builtInEncoders[r]=t,this.builtInDecoders[r]=i}}tryToEncode(e,t){for(let i=0;i<this.builtInEncoders.length;i++){let r=this.builtInEncoders[i];if(null!=r){let s=r(e,t);if(null!=s)return new E(-1-i,s)}}for(let i=0;i<this.encoders.length;i++){let r=this.encoders[i];if(null!=r){let s=r(e,t);if(null!=s)return new E(i,s)}}return e instanceof E?e:null}decode(e,t,i){let r=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(e,t,i):new E(t,e)}}class T{extensionCodec;context;useBigInt64;maxDepth;initialBufferSize;sortKeys;forceFloat32;ignoreUndefined;forceIntegerToFloat;pos;view;bytes;entered=!1;constructor(e){this.extensionCodec=e?.extensionCodec??R.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??100,this.initialBufferSize=e?.initialBufferSize??2048,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new T({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,t){if(t>this.maxDepth)throw Error(`Too deep objects in depth ${t}`);null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.useBigInt64&&"bigint"==typeof e?this.encodeBigInt64(e):this.encodeObject(e,t)}ensureBufferSizeToWrite(e){let t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)}resizeBuffer(e){let t=new ArrayBuffer(e),i=new Uint8Array(t),r=new DataView(t);i.set(this.bytes),this.view=r,this.bytes=i}encodeNil(){this.writeU8(192)}encodeBoolean(e){!1===e?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<0x100000000?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-0x80000000?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<0x100000000)this.writeU8(219),this.writeU32(e);else throw Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){let t=function(e){let t=e.length,i=0,r=0;for(;r<t;){let s=e.charCodeAt(r++);if((0xffffff80&s)==0){i++;continue}if((0xfffff800&s)==0)i+=2;else{if(s>=55296&&s<=56319&&r<t){let t=e.charCodeAt(r);(64512&t)==56320&&(++r,s=((1023&s)<<10)+(1023&t)+65536)}(0xffff0000&s)==0?i+=3:i+=4}}return i}(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,i){if(e.length>50)v.encodeInto(e,t.subarray(i));else!function(e,t,i){let r=e.length,s=i,n=0;for(;n<r;){let i=e.charCodeAt(n++);if((0xffffff80&i)==0){t[s++]=i;continue}if((0xfffff800&i)==0)t[s++]=i>>6&31|192;else{if(i>=55296&&i<=56319&&n<r){let t=e.charCodeAt(n);(64512&t)==56320&&(++n,i=((1023&i)<<10)+(1023&t)+65536)}(0xffff0000&i)==0?t[s++]=i>>12&15|224:(t[s++]=i>>18&7|240,t[s++]=i>>12&63|128),t[s++]=i>>6&63|128}t[s++]=63&i|128}}(e,t,i)}(e,this.bytes,this.pos),this.pos+=t}encodeObject(e,t){let i=this.extensionCodec.tryToEncode(e,this.context);if(null!=i)this.encodeExtension(i);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if("object"==typeof e)this.encodeMap(e,t);else throw Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){let t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<0x100000000)this.writeU8(198),this.writeU32(t);else throw Error(`Too large binary: ${t}`);let i=function(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}(e);this.writeU8a(i)}encodeArray(e,t){let i=e.length;if(i<16)this.writeU8(144+i);else if(i<65536)this.writeU8(220),this.writeU16(i);else if(i<0x100000000)this.writeU8(221),this.writeU32(i);else throw Error(`Too large array: ${i}`);for(let i of e)this.doEncode(i,t+1)}countWithoutUndefined(e,t){let i=0;for(let r of t)void 0!==e[r]&&i++;return i}encodeMap(e,t){let i=Object.keys(e);this.sortKeys&&i.sort();let r=this.ignoreUndefined?this.countWithoutUndefined(e,i):i.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else if(r<0x100000000)this.writeU8(223),this.writeU32(r);else throw Error(`Too large map object: ${r}`);for(let r of i){let i=e[r];this.ignoreUndefined&&void 0===i||(this.encodeString(r),this.doEncode(i,t+1))}}encodeExtension(e){if("function"==typeof e.data){let t=e.data(this.pos+6),i=t.length;if(i>=0x100000000)throw Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(e.type),this.writeU8a(t);return}let t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<0x100000000)this.writeU8(201),this.writeU32(t);else throw Error(`Too large extension object: ${t}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){let t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){var t,i;this.ensureBufferSizeToWrite(8),t=this.view,i=this.pos,t.setUint32(i,e/0x100000000),t.setUint32(i+4,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),m(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}}async function B(e){let t=process.env.FISH_API_KEY;if(!t)return y.NextResponse.json({error:"FISH_API_KEY not configured"},{status:500});try{var i;let r=await e.formData(),s=r.get("audio"),n=r.get("text"),o=r.get("referenceText");if(!s||!n)return y.NextResponse.json({error:"Missing 'audio' file or 'text' field"},{status:400});console.log(`ðŸŸ Fish: Processing request for text: "${n.substring(0,20)}..."`);let a=x.Buffer.from(await s.arrayBuffer()),h=await (0,b.toMonoWav)(a),l=(i={text:n,format:"wav",references:[{audio:h,text:o||n}]},new T(void 0).encodeSharedRef(i)),f=await fetch("https://api.fish.audio/v1/tts",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/msgpack"},body:l});if(!f.ok){let e=await f.text();return console.error(`âŒ Fish Audio Error: ${f.status} ${e}`),y.NextResponse.json({error:`Fish Audio API error: ${e}`},{status:502})}let u=await f.arrayBuffer();return new y.NextResponse(new Uint8Array(u),{status:200,headers:{"Content-Type":"audio/wav","Content-Disposition":'inline; filename="clone-fish.wav"'}})}catch(e){return console.error("Fish Audio clone error:",e),y.NextResponse.json({error:e instanceof Error?e.message:"Internal server error"},{status:500})}}e.s(["POST",()=>B,"maxDuration",0,60],59171);var S=e.i(59171);let C=new t.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/clone/fish/route",pathname:"/api/clone/fish",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/clone/fish/route.ts",nextConfigOutput:"standalone",userland:S}),{workAsyncStorage:F,workUnitAsyncStorage:N,serverHooks:D}=C;function O(){return(0,r.patchFetch)({workAsyncStorage:F,workUnitAsyncStorage:N})}async function z(e,t,r){C.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let y="/api/clone/fish/route";y=y.replace(/\/index$/,"")||"/";let x=await C.prepare(e,t,{srcPage:y,multiZoneDraftMode:!1});if(!x)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:b,params:v,nextConfig:E,parsedUrl:A,isDraftMode:m,prerenderManifest:I,routerServerContext:R,isOnDemandRevalidate:T,revalidateOnlyGenerated:B,resolvedPathname:S,clientReferenceManifest:F,serverActionsManifest:N}=x,D=(0,a.normalizeAppPath)(y),O=!!(I.dynamicRoutes[D]||I.routes[S]),z=async()=>((null==R?void 0:R.render404)?await R.render404(e,t,A,!1):t.end("This page could not be found"),null);if(O&&!m){let e=!!I.routes[S],t=I.dynamicRoutes[D];if(t&&!1===t.fallback&&!e){if(E.experimental.adapterPath)return await z();throw new g.NoFallbackError}}let P=null;!O||C.isDev||m||(P="/index"===(P=S)?"/":P);let _=!0===C.isDev||!O,j=O&&!_;N&&F&&(0,o.setManifestsSingleton)({page:y,clientReferenceManifest:F,serverActionsManifest:N});let $=e.method||"GET",H=(0,n.getTracer)(),W=H.getActiveScopeSpan(),M={params:v,prerenderManifest:I,renderOpts:{experimental:{authInterrupts:!!E.experimental.authInterrupts},cacheComponents:!!E.cacheComponents,supportsDynamicResponse:_,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:E.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,i,r,s)=>C.onRequestError(e,t,r,s,R)},sharedContext:{buildId:b}},k=new h.NodeNextRequest(e),K=new h.NodeNextResponse(t),q=l.NextRequestAdapter.fromNodeNextRequest(k,(0,l.signalFromNodeResponse)(t));try{let o=async e=>C.handle(q,M).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let i=H.getRootSpanAttributes();if(!i)return;if(i.get("next.span_type")!==f.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${i.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=i.get("next.route");if(r){let t=`${$} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":t}),e.updateName(t)}else e.updateName(`${$} ${y}`)}),a=!!(0,s.getRequestMeta)(e,"minimalMode"),h=async s=>{var n,h;let l=async({previousCacheEntry:i})=>{try{if(!a&&T&&B&&!i)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await o(s);e.fetchMetrics=M.renderOpts.fetchMetrics;let h=M.renderOpts.pendingWaitUntil;h&&r.waitUntil&&(r.waitUntil(h),h=void 0);let l=M.renderOpts.collectedTags;if(!O)return await (0,c.sendResponse)(k,K,n,M.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,d.toNodeOutgoingHttpHeaders)(n.headers);l&&(t[p.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let i=void 0!==M.renderOpts.collectedRevalidate&&!(M.renderOpts.collectedRevalidate>=p.INFINITE_CACHE)&&M.renderOpts.collectedRevalidate,r=void 0===M.renderOpts.collectedExpire||M.renderOpts.collectedExpire>=p.INFINITE_CACHE?void 0:M.renderOpts.collectedExpire;return{value:{kind:U.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:i,expire:r}}}}catch(t){throw(null==i?void 0:i.isStale)&&await C.onRequestError(e,t,{routerKind:"App Router",routePath:y,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:j,isOnDemandRevalidate:T})},!1,R),t}},f=await C.handleResponse({req:e,nextConfig:E,cacheKey:P,routeKind:i.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:I,isRoutePPREnabled:!1,isOnDemandRevalidate:T,revalidateOnlyGenerated:B,responseGenerator:l,waitUntil:r.waitUntil,isMinimalMode:a});if(!O)return null;if((null==f||null==(n=f.value)?void 0:n.kind)!==U.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==f||null==(h=f.value)?void 0:h.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});a||t.setHeader("x-nextjs-cache",T?"REVALIDATED":f.isMiss?"MISS":f.isStale?"STALE":"HIT"),m&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let g=(0,d.fromNodeOutgoingHttpHeaders)(f.value.headers);return a&&O||g.delete(p.NEXT_CACHE_TAGS_HEADER),!f.cacheControl||t.getHeader("Cache-Control")||g.get("Cache-Control")||g.set("Cache-Control",(0,w.getCacheControlHeader)(f.cacheControl)),await (0,c.sendResponse)(k,K,new Response(f.value.body,{headers:g,status:f.value.status||200})),null};W?await h(W):await H.withPropagatedContext(e.headers,()=>H.trace(f.BaseServerSpan.handleRequest,{spanName:`${$} ${y}`,kind:n.SpanKind.SERVER,attributes:{"http.method":$,"http.target":e.url}},h))}catch(t){if(t instanceof g.NoFallbackError||await C.onRequestError(e,t,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:j,isOnDemandRevalidate:T})},!1,R),O)throw t;return await (0,c.sendResponse)(k,K,new Response(null,{status:500})),null}}e.s(["handler",()=>z,"patchFetch",()=>O,"routeModule",()=>C,"serverHooks",()=>D,"workAsyncStorage",()=>F,"workUnitAsyncStorage",()=>N],26691)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_9a66309d.js.map